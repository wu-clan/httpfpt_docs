## 常规变量

- global: 全局变量，仅在 data 目录下的 `global_vars.yaml` 文件中以键值对形式进行定义
- env: 环境变量，在测试用例依赖的环境文件中以键值对的形式进行定义
- cache: 缓存变量，在同一 `python包` 下运行测试用例时，在系统内存中定义

## hooks

仅在 data 目录下的 hooks.py 文件中定义，根据定义结构在用例数据文件中使用

## 变量表达式

变量和 hooks 开头请遵循规则: a-zA-Z_

- 常规变量：全局可用

   ```text
   ${var} 或 $var
   ```

- [关联测试用例变量](params_desc.md#testcase)：仅在单个测试用例中含有关联测试用例变量提取，并需要引用关联测试用例设置的变量时，使用此方式

   ```text
   ^{var} 或 ^var
   ```

- hook：全局可用，在测试用例前后置 hook 参数下定义时，只执行代码, 在其他地方使用时, 将执行代码并替换为返回值

   ```text
   ${func()}
   ```

## 变量替换规则

### 常规变量

请求数据解析时，寻找变量优先级为： cache > env > global，找到变量自动替换数据，未找到抛出异常

### 关联变量

关联测试用例执行后，默认在 cache 中存储关联变量，找到变量自动替换数据，未找到抛出异常

::: warning
关联变量无法跨用例使用，仅对当前正在运行的单个测试用例可用，当前用例运行后将自动清除；
需要额外注意此变量名定义，避免与常规 cache 变量产生冲突
:::

## 变量存储

- env：在当前测试用例数据所调用的测试环境文件中进行持久化写入，键值不会重复，新值覆盖旧值
- global: 在全局变量文件中进行持久化写入，键值不会重复，新值覆盖旧值
- cache：在同一 `python包` 目录下，写入所有测试用例运行过程的内存中，不会持久化，同一 `python包` 目录下所有测试用例运行结束后自动清除

::: warning 提示
变量持久化写入会冲刷掉手写注释内容
:::
